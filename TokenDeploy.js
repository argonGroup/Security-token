/*
 * Deployment script for Blockchain Capital Token Smart Contract.
 * Copyright Â© 2017 by ABDK Consulting.
 * Author: Mikhail Vladimirov <mikhail.vladimirov@gmail.com>
 */

if (!web3.eth.contract ([{"constant":false,"inputs":[],"name":"freezeTransfers","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"supply","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"unfreezeTransfers","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_transferAuthorizer","type":"address"}],"name":"setTransferAuthorizer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_tokenIssuer","type":"address"},{"name":"_transferAuthorizer","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[],"name":"Freeze","type":"event"},{"anonymous":false,"inputs":[],"name":"Unfreeze","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}]).new (
  tokenIssuer,
  transferAuthorizer,
  {from: web3.eth.accounts[0], data: "0x60606040526004805460a060020a60ff0219169055341561001f57600080fd5b6040516040806108ec833981016040528080519190602001805160028054600160a060020a03958616600160a060020a0319918216811790925560008281526020819052604090206000199055600380548216909217909155600480549590921694169390931790925550506108528061009a6000396000f30060606040526004361061007f5763ffffffff60e060020a600035041663015024608114610084578063095ea7b31461009957806318160ddd146100cf57806323b872dd146100f457806331c420d41461011c57806370a082311461012f578063a9059cbb1461014e578063dd62ed3e14610170578063eb14e21014610195575b600080fd5b341561008f57600080fd5b6100976101b4565b005b34156100a457600080fd5b6100bb600160a060020a0360043516602435610235565b604051901515815260200160405180910390f35b34156100da57600080fd5b6100e26102a2565b60405190815260200160405180910390f35b34156100ff57600080fd5b6100bb600160a060020a03600435811690602435166044356102cf565b341561012757600080fd5b61009761039d565b341561013a57600080fd5b6100e2600160a060020a0360043516610416565b341561015957600080fd5b6100bb600160a060020a0360043516602435610444565b341561017b57600080fd5b6100e2600160a060020a036004358116906024351661050e565b34156101a057600080fd5b610097600160a060020a0360043516610539565b60035433600160a060020a039081169116146101cf57600080fd5b60045460a060020a900460ff161515610233576004805474ff0000000000000000000000000000000000000000191660a060020a1790557f615acbaede366d76a8b8cb2a9ada6a71495f0786513d71aa97aaf0c3910b78de60405160405180910390a15b565b600160a060020a03338116600081815260016020908152604080832094871680845294909152808220859055909291907f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259085905190815260200160405180910390a35060015b92915050565b600254600160a060020a03166000908152602081905260408120546102ca9060001990610583565b905090565b60045460009060a060020a900460ff16156102ec57506000610396565b600454600160a060020a031663735826bf3086868660006040516020015260405160e060020a63ffffffff8716028152600160a060020a0394851660048201529284166024840152921660448201526064810191909152608401602060405180830381600087803b151561035f57600080fd5b6102c65a03f1151561037057600080fd5b50505060405180519050151561038857506000610396565b610393848484610595565b90505b9392505050565b60035433600160a060020a039081169116146103b857600080fd5b60045460a060020a900460ff1615610233576004805474ff0000000000000000000000000000000000000000191690557f2f05ba71d0df11bf5fa562a6569d70c4f80da84284badbe015ce1456063d0ded60405160405180910390a1565b600254600090600160a060020a0383811691161461043c57610437826106fe565b61029c565b600092915050565b60045460009060a060020a900460ff16156104615750600061029c565b600454600160a060020a031663735826bf3033868660006040516020015260405160e060020a63ffffffff8716028152600160a060020a0394851660048201529284166024840152921660448201526064810191909152608401602060405180830381600087803b15156104d457600080fd5b6102c65a03f115156104e557600080fd5b5050506040518051905015156104fd5750600061029c565b6105078383610719565b905061029c565b600160a060020a03918216600090815260016020908152604080832093909416825291909152205490565b60035433600160a060020a0390811691161461055457600080fd5b6004805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60008183101561058f57fe5b50900390565b600160a060020a0380841660009081526001602090815260408083203390941683529290529081205481838210156105d057600092506106f5565b50600160a060020a038516600090815260208190526040902054838110156105fb57600092506106f5565b6106058285610583565b600160a060020a0380881660009081526001602090815260408083203390941683529290529081209190915584118015610651575084600160a060020a031686600160a060020a031614155b156106a9576106608185610583565b600160a060020a03808816600090815260208190526040808220939093559087168152205461068f9085610810565b600160a060020a0386166000908152602081905260409020555b84600160a060020a031686600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8660405190815260200160405180910390a3600192505b50509392505050565b600160a060020a031660009081526020819052604090205490565b600160a060020a033316600090815260208190526040812054828110156107435760009150610809565b600083118015610765575083600160a060020a031633600160a060020a031614155b156107bd576107748184610583565b600160a060020a0333811660009081526020819052604080822093909355908616815220546107a39084610810565b600160a060020a0385166000908152602081905260409020555b83600160a060020a031633600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8560405190815260200160405180910390a3600191505b5092915050565b600060001982900383111561082157fe5b5001905600a165627a7a723058208ecc578a586bba6c01408af582d5391daf12bf2b7b67e55e892ff996bbf9d2110029", gas: 1000000},
  function (e, r) {
    if (e) throw e;
    if (typeof r.address !== "undefined") {
      console.log (
        "Deployed at " + r.address + " (tx: " + r.transactionHash + ")");
    }
  }).transactionHash) {
  console.log ("Deployment failed.  Probably web3.eth.accounts[0] is locked.");
}
